!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.JSONFormatter=n()}(this,function(){"use strict";function e(n,t){return this?void("number"==typeof t?(this.message=n+" at index "+t,this.index=t):this.message=n):new e(n,t)}function n(e){for(var n,t,a=1;a<arguments.length;)if(n=arguments[a++])for(var t in n)e[t]=n[t];return e}function t(i){function c(e){x&&f.push(x),e&a&&(null!=u&&h.push(u),u=0,(e===a&&i.indentObject||e===s&&i.indentArray)&&(w+=i.indent)),x=e}function o(){return(x===a&&i.indentObject||x===s&&i.indentArray)&&(w=w.slice(0,-i.indent.length)),x&a&&(u=h.pop()),x=f.pop()}function d(e){var n="";x===r?o():x&a&&(u++||(x===a&&i.indentObject||x===s&&i.indentArray?(n=i.newline+w,i.commaFirst&&(n+=" "+(i.spaceAfterComma?" ":""))):(x===a&&i.spacedObject||x===s&&i.spacedArray)&&(n=" ")),x===a&&c(r)),p+=n+e}i=n({},t.MINI,i);var l,p,f,x,h,u,w,m,g,b=/["\-\dntf\{\[]/g,I=/["\-\dntf\{\[\]]/g,A=/[:,\}\]]/g,y=/"/g,O=/["\}]/g,C=/(?:\\"|[^"\t\r\n])*/g,j=/(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE](?:[+\-]?\d*)?)?/g,k=/[ \t\r\n]+/g,E=/[^ \t\r\n]/g,v={t:"true",f:"false",n:"null"};this.append=function(n){l&&(n=l+n,l="");var t,f,h,U,F=m.lastIndex=0;e:for(;F<n.length&&(f=m.exec(n));){if(t=f[0],F+t.length<m.lastIndex&&(E.lastIndex=F,E.exec(n),E.lastIndex<m.lastIndex))throw new e("Syntax error",g+E.lastIndex);switch(F=m.lastIndex,t){case'"':if(C.lastIndex=F,f=C.exec(n),C.lastIndex===n.length){l=F>1?n.slice(F-1):n;break e}if('"'!==n[C.lastIndex])throw new e("End of string expected",g+C.lastIndex);d(n.slice(F-1,F=C.lastIndex+1)),m=A;break;case"t":case"f":case"n":if(h=v[t],n.length<F+h.length-1){l=F>1?n.slice(F-1):n;break e}if(n.substr(F-1,h.length)!==h)throw new e("Unknown sequence",g+F-1);d(h),F+=h.length-1,m=A;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(j.lastIndex=F-("-"!==t),f=j.exec(n),j.lastIndex===n.length){l=F>1?n.slice(F-1):n;break e}h=n.slice(F-1,F=j.lastIndex),i.uppercaseExponential?h.indexOf("e")>-1&&(h=h.toUpperCase()):h.indexOf("E")>-1&&(h=h.toLowerCase()),d(h),m=A;break;case"{":x===s?d("{"):p+="{",c(a),m=O;break;case"[":x===s?d("["):p+="[",c(s),m=I;break;case"}":if(x!==a)throw new e('Unexpected "}"',g+m.lastIndex-1);U=u>0,o()===r&&o(),p+=(U&&i.indentObject?i.newline+w:i.spacedObject?" ":"")+"}",m=A;break;case"]":if(x!==s)throw new e('Unexpected "]"',g+m.lastIndex-1);U=u>0,o()===r&&o(),p+=(U&&i.indentArray?i.newline+w:i.spacedArray?" ":"")+"]",m=A;break;case":":if(x!==r)throw new e('Unexpected ":"',g+m.lastIndex-1);m=b,p+=(i.spaceBeforeColon?" ":"")+":"+(i.spaceAfterColon?" ":"");break;case",":if(x!==a&&x!==s)throw new e('Unexpected ","',g+m.lastIndex-1);m=x===a?y:b,p+=x===a&&i.indentObject||i.indentArray?i.commaFirst?i.newline+w+","+(i.spaceAfterComma?" ":""):","+i.newline+w:","+(i.spaceAfterComma?" ":"")}x||(m=k),m.lastIndex=F}if(!f&&(E.lastIndex=F,f=E.exec(n)))throw new e("Syntax error",g+f.index);return g+=n.length-l.length,this},this.end=function(n){if(n&&this.append(n),p||this.append(" "),!p||x)throw new e("Unexpected end of input",g);return this},this.flush=function(){var e=p;return p="",e},this.reset=function(e){return l=p=w="",f=[],h=[],x=u=null,m=b,g=0,e&&(i=n(i,e)),this},this.reset()}var a=1,r=2,s=3,i={newline:"\n",indent:"  ",indentArray:!1,indentObject:!1,commaFirst:!1,spaceAfterColon:!1,spaceAfterComma:!1,spaceBeforeColon:!1,spacedArray:!1,spacedObject:!1,uppercaseExponential:!1};return e.prototype=new Error,e.prototype.name="JSONError",t.MINI=n({},i),t.PRETTY={newline:"\n",indent:"  ",indentArray:!0,indentObject:!0,commaFirst:!1,spaceAfterColon:!0,spaceAfterComma:!0,spaceBeforeColon:!1,spacedArray:!1,spacedObject:!1,uppercaseExponential:!1},t.JSONError=e,t});
//# sourceMappingURL=json-fmt.min.map